 <h1>SIMPLE-SCADA и ARDUINO</h1>
 <br>
	   <p><b>Задание для варианта 2: </b></p>
	   <p>Контроллер. При отжатой кнопке Л1 не горит, Л2 и Л3 горят, ШИМ = %резистора до угла поворота резистора 40%. При угле резистора от 40% до 80% Л1 мигает, горит Л2, Л3 не горит, ШИМ дает (в %) 20+%резистора/2. При угле резистора от 80% до 90% Л1 и Л2 не горят, Л3 горит, ШИМ (в %) дает 60-%резистора.  При достижении 90% Л1, Л2 и Л3 мигают последовательно, ШИМ =0.  При нажатой кнопке Л1, Л2 и Л3 горят, ШИМ=100%-% резистора.</p>
	   <p>SCADA-система отражает состояние всех входов и выходов. Возможно принудительно включить и отключить действие кнопки и отключить индикацию Л1, Л2 и Л3 и вкл. ШИМ=50%.</p>
	   <p>Л1 подключена к 7 порту, Л2 - 8, Л3 - 9, переменный резистор - A2, кнопка - 6, ШИМ - 5</p>
	   <p>Для выполнения данной работы нам потребуется:</p>
	  <p>•<a href=" https://www.arduino.cc/en/main/software">ARDUINO IDE;</a></p>
		<p>•<a href=" https://flprog.ru/downloads/distrutives/actualversion/versija-programmy-flprog-3-0-3/">FLProg;</a></</p>
		<p>•<a href="http://www.owen.ru/catalog/36242946">OPC-сервер ОВЕН;</a></p>
		<p>•Плата ARDUINO UNO</p>
		<p>•3 светодиода</p>
		<p>•Переменный резистор</p>
		<p>•Кнопка</p>
		<p>•Устройство ШИМ</p>
	   <p><b>Вид подключенной платы:</p>
	   <p><img src="src/img/16.jpg" width="700"></p>
	   <p><b>1)Программируем Arduino в программе FlProg.</b></p>
	    <p> Соответственно варианту выбираем pin анологовых/цифровых входов-выходов. Затем включаем Modbus RTU Slave режим общения устройство с OPC сервером. Для переменных заданных в графе Modbus запоминаем адреса общения, так как они понадобяться при подключении сервера с Arduino. Разрабатываем логическую схему работы контроллера с помошью встроенных блоков FlProg.</p>
	   <p><img src="src/img/17.png" width="700"></p>
	   <p>2)Компилируем проект в ARDUINO IDE, проверяем скетч, выбираем порт к которому подключена плата, загружаем скетч на плату:</p>
	   <p><p><img src="src/img/18.png" width="700"></p></p>
	   <p><b>3)Настраиваем OPC сервер. </b></p>
	   <p> Открываем ОВЕН OPC и аналогично настройке сервера MasterOPC создаём новый узел. Протокол выбираем Modbus-RTU, Порт такой же как в программе Arduino:</p>
	   <p><img src="src/img/19.png" width="700"></p>
	   <p>Создаём устройство не меняя стандартные настройки. Теги создаём такого же региона и адреса, которые заданы в FlProg. Необходимо также обратить внимание на тип доступа. Если мы считываем значение со входа(кнопки, резистора), то нужно ставить тип доступа только чтение, для предотвращения ошибок, если записываем(включаем светодиод, то ставим запись/чтение. После настройки нажимаем кнопку запустить опрос и должны отобразиться текущие значения тегов: </p>
	    <p><img src="src/img/20.png" width="700"> </p>
	   <p><b>4)Создаём новый проект в SIMPLE-SCADA.</b></p>
	    <p>Подключаем Owen OPC server.</p>
	   <p>Размещаем все необходимые элементы и присваиваем им необходимые свойства:</p>
	   <p><img src="src/img/21.png" width="700"></b></p>
	   <p><b>5)Прописываем необходимые скрипты. </p>
	    <p>Пример: Л3 - Красный (Image1), OnDataChange: </p>
		<p><img src="src/img/22.png" width="700"></p>
	   <p>Скрипты необходимо прописать только для "ламп".</p>
 <b>6)После того, как все действия выполнены, можем преступить к запуску проекта. Для этого нужно:</b></p>
    <p>1)сохранить данный проект (ctrl+s);</p>
	  <p>2)запустить опрос в OPC сервере (если он выключен);</p>
	    <p>3)открыть Client и открыть созданный проект.</p>
		<p>Скриншот работы SCADA в Client:</p>
		 <p><img src="src/img/23.png" width="700"></p>